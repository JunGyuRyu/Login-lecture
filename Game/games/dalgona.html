<!DOCTYPE html>
<html lang="ko"><head><link rel="stylesheet" href="dalgona.css">
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<script>
window.onload = function(){
//원 그리기
var canvas0 = document.getElementById('circle');
var ctx0 = canvas0.getContext('2d');
ctx0.beginPath();
ctx0.arc(800,350,330, 0, Math.PI * 2);
ctx0.stroke();
ctx0.fillStyle = '#f8d9b6';
ctx0.fill();

//삼각형 그리기
var canvas1 = document.getElementById('triangle');
var ctx1 = canvas1.getContext('2d');
ctx1.beginPath();
ctx1.moveTo(800,50);
ctx1.lineTo(1040, 520);    
ctx1.lineTo(560, 520);  
ctx1.closePath();
ctx1.fillStyle = '#f8e0c0';
ctx1.fill();
ctx1.globalCompositeOperation = "source-over";


//버튼 클릭시 작동할 함수
var checkbtnon=false;
var clickBtn =  document.querySelectorAll(".btn");
for(var j=0; j<clickBtn.length; j++){
clickBtn[j].addEventListener("click",function(){
this.style.color = 'white';
this.style.background='#f8d9b6';
checkbtnon=true;
});}



//같은 버튼 2번 클릭 체크
var doubleClick = [false];
    function doubleClickCheck(i){
        if(doubleClick[i] == true){
            return doubleClick[i];
        }else{
            doubleClick[i] = true;
            return false;
        }
    }
    function insert(i){
        if(doubleClickCheck(i)){ return;}
        CheckClear+=1;
    }
clickBtn[0].onclick =function(){insert(0);};
clickBtn[1].onclick =function(){insert(1);};
clickBtn[2].onclick =function(){insert(2);};
clickBtn[3].onclick =function(){insert(3);};
clickBtn[4].onclick =function(){insert(4);};
clickBtn[5].onclick =function(){insert(5);};
clickBtn[6].onclick =function(){insert(6);};
clickBtn[7].onclick =function(){insert(7);};
clickBtn[8].onclick =function(){insert(8);};
clickBtn[9].onclick =function(){insert(9);};
clickBtn[10].onclick =function(){insert(10);};
clickBtn[11].onclick =function(){insert(11);};
clickBtn[12].onclick =function(){insert(12);};
clickBtn[13].onclick =function(){insert(13);};
clickBtn[14].onclick =function(){insert(14);};
clickBtn[15].onclick =function(){insert(15);};
clickBtn[16].onclick =function(){insert(16);};
clickBtn[17].onclick =function(){insert(17);};
clickBtn[18].onclick =function(){insert(18);};
clickBtn[19].onclick =function(){insert(19);};
clickBtn[20].onclick =function(){insert(20);};
clickBtn[21].onclick =function(){insert(21);};
clickBtn[22].onclick =function(){insert(22);};
clickBtn[23].onclick =function(){insert(23);};
clickBtn[24].onclick =function(){insert(24);};
clickBtn[25].onclick =function(){insert(25);};
clickBtn[26].onclick =function(){insert(26);};
clickBtn[27].onclick =function(){insert(27);};
clickBtn[28].onclick =function(){insert(28);};
clickBtn[29].onclick =function(){insert(29);};
clickBtn[30].onclick =function(){insert(30);};
clickBtn[31].onclick =function(){insert(31);};
clickBtn[32].onclick =function(){insert(32);};
clickBtn[33].onclick =function(){insert(33);};
clickBtn[34].onclick =function(){insert(34);};
clickBtn[35].onclick =function(){insert(35);};
clickBtn[36].onclick =function(){insert(36);};
clickBtn[37].onclick =function(){insert(37);};
clickBtn[38].onclick =function(){insert(38);};
clickBtn[39].onclick =function(){insert(39);};
clickBtn[40].onclick =function(){insert(40);};
clickBtn[41].onclick =function(){insert(41);};
clickBtn[42].onclick =function(){insert(42);};
clickBtn[43].onclick =function(){insert(43);};
clickBtn[44].onclick =function(){insert(44);};
clickBtn[45].onclick =function(){insert(45);};
clickBtn[46].onclick =function(){insert(46);};
clickBtn[47].onclick =function(){insert(47);};
clickBtn[48].onclick =function(){insert(48);};
clickBtn[49].onclick =function(){insert(49);};
clickBtn[50].onclick =function(){insert(50);};
clickBtn[51].onclick =function(){insert(51);};
clickBtn[52].onclick =function(){insert(52);};
clickBtn[53].onclick =function(){insert(53);};
clickBtn[54].onclick =function(){insert(54);};
clickBtn[55].onclick =function(){insert(55);};
clickBtn[56].onclick =function(){insert(56);};
clickBtn[57].onclick =function(){insert(57);};
clickBtn[58].onclick =function(){insert(58);};
clickBtn[59].onclick =function(){insert(59);};
clickBtn[60].onclick =function(){insert(60);};
clickBtn[61].onclick =function(){insert(61);};
clickBtn[62].onclick =function(){insert(62);};
clickBtn[63].onclick =function(){insert(63);};
clickBtn[64].onclick =function(){insert(64);};
clickBtn[65].onclick =function(){insert(65);};
clickBtn[66].onclick =function(){insert(66);};




      /*버튼 말고 다른 곳 누르면 CrackRate 증가
      CrackRate 100% 되면 탈락
      67개 버튼 전부 시간안에 클릭 시 클리어
      */
var CheckClear=0;
var CrackRate=0;
document.body.addEventListener("click",function(){
if(checkbtnon == true){
CrackRate -=20;
}
checkbtnon=false;
CrackRate+=20;
if(CrackRate == 100){
alert("Yours Is Broken!");
window.location.reload();
}
if(CheckClear==67){
alert('You Are Alive!');
location.href="TugOfWar.html";
}
});


//CrackRate, Time, 클릭한 버튼 수 테이블에 표시
var CrackRate1=document.getElementById('CrackRate');
setInterval(function(){
CrackRate1.innerHTML="Crack Rate: "+CrackRate+"%";},100);

var Time=document.getElementById('Time');
var TimeEnd=60;
var ChkTime = setInterval(function(){
TimeEnd -=1;
Time.innerHTML="Time: "+TimeEnd+" Sec";
if(TimeEnd <= -1){
clearInterval(ChkTime);
alert("Time Out!");
window.location.reload();
}
},1000);

var Clicked=document.getElementById('Clicked');
setInterval(function(){
Clicked.innerHTML="Clicked: "+CheckClear+"개";},100);


}
</script>
</head>
<body>
<div><table height=700px width=20% style="border-collapse: collapse;text-align:center">
  <tr height="20%" id="title" ><th><font size="100%" color="orange">달고나 뽑기</font></th></tr>
  <tr height="15%" id="GameEx" ><th>Game<br/>Description</th></tr>
  <tr height="60%" id="Ex" ><th>
  1. 버튼 이외의 다른 부분을 클릭하면 Crack Rate 20% 증가
  <br/><br/>2. Time이 0 되면 실패
  <br/><br/>3. CrackRate 100% 되면 실패
  <br/><br/>4. 시간 멈추기 없음 (치팅 방지)
  <br/><br/>5. 시간안에 모든 버튼 클릭시 성공
  <br/><br/>※ 너무 빨리 누르면 버튼 안눌려서 CrackRate 증가 할 수도 있음
  </th></tr>
  </table></div>

<div><table height=100px width=200px style="border-collapse: collapse;text-align:center">
<tr><th height=50px width=270px id="CrackRate">Crack Rate: n%</th></tr>
</table><div>

<div><table height=100px width=200px style="border-collapse: collapse;text-align:center">
<tr><th height=50px width=270px id="Time">Time: 60 Sec</th></tr>
</table><div>

<div><table height=100px width=200px style="border-collapse: collapse;text-align:center">
<tr><th height=50px width=270px id="Clicked">Clicked: n개</th></tr>
</table><div>

<div>
  <canvas id="circle" width="1500px" height="720px"></canvas>
  <canvas id="triangle" width="1500px" height="720px"></canvas>
  </div>
  
<div id="btns">
  <button id="btn1" class="btn">O</button>
  <button id="btn2" class="btn">O</button>
  <button id="btn3" class="btn">O</button>
  <button id="btn4" class="btn">O</button>
  <button id="btn5" class="btn">O</button>
  <button id="btn6" class="btn">O</button>
  <button id="btn7" class="btn">O</button>
  <button id="btn8" class="btn">O</button>
  <button id="btn9" class="btn">O</button>
  <button id="btn10" class="btn">O</button>
  <button id="btn11" class="btn">O</button>
  <button id="btn12" class="btn">O</button>
  <button id="btn13" class="btn">O</button>
  <button id="btn14" class="btn">O</button>
  <button id="btn15" class="btn">O</button>
  <button id="btn16" class="btn">O</button>
  <button id="btn17" class="btn">O</button>
  <button id="btn18" class="btn">O</button>
  <button id="btn19" class="btn">O</button>
  <button id="btn20" class="btn">O</button>
  <button id="btn21" class="btn">O</button>
  <button id="btn22" class="btn">O</button>
  <button id="btn23" class="btn">O</button>
  <button id="btn24" class="btn">O</button>
  <button id="btn25" class="btn">O</button>
  <button id="btn26" class="btn">O</button>
  <button id="btn27" class="btn">O</button>
  <button id="btn28" class="btn">O</button>
  <button id="btn29" class="btn">O</button>
  <button id="btn30" class="btn">O</button>
  <button id="btn31" class="btn">O</button>
  <button id="btn32" class="btn">O</button>
  <button id="btn33" class="btn">O</button>
  <button id="btn34" class="btn">O</button>
  <button id="btn35" class="btn">O</button>
  <button id="btn36" class="btn">O</button>
  <button id="btn37" class="btn">O</button>
  <button id="btn38" class="btn">O</button>
  <button id="btn39" class="btn">O</button>
  <button id="btn40" class="btn">O</button>
  <button id="btn41" class="btn">O</button>
  <button id="btn42" class="btn">O</button>
  <button id="btn43" class="btn">O</button>
  <button id="btn44" class="btn">O</button>
  <button id="btn45" class="btn">O</button>
  <button id="btn46" class="btn">O</button>
  <button id="btn47" class="btn">O</button>
  <button id="btn48" class="btn">O</button>
  <button id="btn49" class="btn">O</button>
  <button id="btn50" class="btn">O</button>
  <button id="btn51" class="btn">O</button>
  <button id="btn52" class="btn">O</button>
  <button id="btn53" class="btn">O</button>
  <button id="btn54" class="btn">O</button>
  <button id="btn55" class="btn">O</button>
  <button id="btn56" class="btn">O</button>
  <button id="btn57" class="btn">O</button>
  <button id="btn58" class="btn">O</button>
  <button id="btn59" class="btn">O</button>
  <button id="btn60" class="btn">O</button>
  <button id="btn61" class="btn">O</button>
  <button id="btn62" class="btn">O</button>
  <button id="btn63" class="btn">O</button>
  <button id="btn64" class="btn">O</button>
  <button id="btn65" class="btn">O</button>
  <button id="btn66" class="btn">O</button>
  <button id="btn67" class="btn">O</button>
  </div>
</body>
</html>